<%- include ("header") %>

    <body>
        <!-- Overlay, must be placed direct after the opening body tag. -->
        <div class="bs-canvas-overlay bs-canvas-anim bg-dark position-fixed w-100 h-100"></div>

        <!-- Pushable content along with off-canvas opener. -->
        <div class="bs-offset-main bs-canvas-anim bg-secondary">
            <button class="btn btn-primary" type="button" data-toggle="canvas" data-target="#bs-canvas-left"
                aria-expanded="false" aria-controls="bs-canvas-left">&#9776;</button>
            Display search tab
        </div>

        <!-- Off-canvas sidebar markup, left -->
        <div id="bs-canvas-left" class="bs-canvas bs-canvas-anim bs-canvas-left position-fixed bg-secondary h-100">
            <header class="bs-canvas-header p-3 bg-primary">
                <h4 class="d-inline-block text-light mb-0">Search tab</h4>
                <button type="button" class="bs-canvas-close close" aria-label="Close"><span aria-hidden="true"
                        class="text-light">&times;</span></button>
            </header>
            <div class="bs-canvas-content px-3 py-5">
                <form role="form">
                    <div class="form-group">
                        <input type="lieu_depart" name="lieu_depart" id="lieu_depart"
                            class="form-control form-control-sm" placeholder="Départ...">
                    </div>
                    <div class="form-group">
                        <input type="lieu_arrivee" name="lieu_arrivee" id="lieu_arrivee"
                            class="form-control form-control-sm" placeholder="Arrivée...">
                    </div>
                    <div class="shadow p-2 mb-2 bg-primary">
                    <input class="btn btn-secondary btn-lg btn-block" type="submit" value="Search">
                    </div>
                </form>
            </div>
        </div>


        <div id="map">
            <!-- Ici s'affichera la carte -->
        </div>



        <!-- Fichiers Javascript -->
        <script src="https://unpkg.com/leaflet@1.3.1/dist/leaflet.js"
            integrity="sha512-/Nsx9X4HebavoBvEBuyp3I7od5tA0UzAxs+j83KgC8PU0kgB4XiK4Lfe4y4cgBtaRJQEIFCW+oC506aPT2L1zw=="
            crossorigin=""></script>
        <script type="text/javascript">
            // On initialise la latitude et la longitude de Paris (centre de la carte)
            var lat = 48.852969;
            var lon = 2.349903;
            var macarte = null;
            // Fonction d'initialisation de la carte
            function initMap() {
                // Créer l'objet "macarte" et l'insèrer dans l'élément HTML qui a l'ID "map"
                macarte = L.map('map').setView([lat, lon], 11);
                // Leaflet ne récupère pas les cartes (tiles) sur un serveur par défaut. Nous devons lui préciser où nous souhaitons les récupérer. Ici, openstreetmap.fr
                L.tileLayer('https://{s}.tile.openstreetmap.fr/osmfr/{z}/{x}/{y}.png', {
                    // Il est toujours bien de laisser le lien vers la source des données
                    attribution: 'données © <a href="//osm.org/copyright">OpenStreetMap</a>/ODbL - rendu <a href="//openstreetmap.fr">OSM France</a>',
                    minZoom: 1,
                    maxZoom: 20
                }).addTo(macarte);
            }
            window.onload = function () {
                // Fonction d'initialisation qui s'exécute lorsque le DOM est chargé
                initMap();
                $('[data-toggle="canvas"][aria-expanded="false"]').click();
            };
            jQuery(document).ready(function ($) {
                var bsDefaults = {
                    offset: false,
                    overlay: true,
                    width: '330px'
                },
                    bsMain = $('.bs-offset-main'),
                    bsOverlay = $('.bs-canvas-overlay');

                $('[data-toggle="canvas"][aria-expanded="false"]').on('click', function () {
                    var canvas = $(this).data('target'),
                        opts = $.extend({}, bsDefaults, $(canvas).data()),
                        prop = $(canvas).hasClass('bs-canvas-right') ? 'margin-right' : 'margin-left';

                    if (opts.width === '100%')
                        opts.offset = false;

                    $(canvas).css('width', opts.width);
                    if (opts.offset && bsMain.length)
                        bsMain.css(prop, opts.width);

                    $(canvas + ' .bs-canvas-close').attr('aria-expanded', "true");
                    $('[data-toggle="canvas"][data-target="' + canvas + '"]').attr('aria-expanded', "true");
                    if (opts.overlay && bsOverlay.length)
                        bsOverlay.addClass('show');
                    return false;
                });

                $('.bs-canvas-close, .bs-canvas-overlay').on('click', function () {
                    var canvas, aria;
                    if ($(this).hasClass('bs-canvas-close')) {
                        canvas = $(this).closest('.bs-canvas');
                        aria = $(this).add($('[data-toggle="canvas"][data-target="#' + canvas.attr('id') + '"]'));
                        if (bsMain.length)
                            bsMain.css(($(canvas).hasClass('bs-canvas-right') ? 'margin-right' : 'margin-left'), '');
                    } else {
                        canvas = $('.bs-canvas');
                        aria = $('.bs-canvas-close, [data-toggle="canvas"]');
                        if (bsMain.length)
                            bsMain.css({
                                'margin-left': '',
                                'margin-right': ''
                            });
                    }
                    canvas.css('width', '');
                    aria.attr('aria-expanded', "false");
                    if (bsOverlay.length)
                        bsOverlay.removeClass('show');
                    return false;
                });
            });
        </script>
    </body>


    <%- include ("footer") %>